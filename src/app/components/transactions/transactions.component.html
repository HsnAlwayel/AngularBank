
<p-toolbar>
  <div class="p-toolbar-group-left">
    <p-dropdown
      class="filter-input"
      [options]="filterOptions"
      [(ngModel)]="selectedType"
      placeholder="Filter by Type"
      (onChange)="onSearch()"
    ></p-dropdown>

    <p-calendar
      class="filter-input"
      [(ngModel)]="dateFrom"
      selectionMode="single"
      placeholder="From"
      (onSelect)="onSearch()"
    ></p-calendar>

    <p-calendar
      class="filter-input"
      [(ngModel)]="dateTo"
      selectionMode="single"
      placeholder="To"
      (onSelect)="onSearch()"
    ></p-calendar>

    <div class="amount-range filter-input">
      <input
        pInputText
        type="number"
        placeholder="Min"
        [(ngModel)]="minAmount"
        (input)="onSearch()"
      />
      <span class="range-separator">â€“</span>
      <input
        pInputText
        type="number"
        placeholder="Max"
        [(ngModel)]="maxAmount"
        (input)="onSearch()"
      />
    </div>
  </div>

  <div class="p-toolbar-group-right">
    <button
      pButton
      type="button"
      label="Clear Filters"
      icon="pi pi-filter-slash"
      styleClass="p-button-danger p-button-outlined p-button-rounded"
      (click)="clearFilters()"
      title="Clear all filters"
    ></button>
  </div>
</p-toolbar>

<p-table
  [value]="transactions"
  [paginator]="true"
  [rows]="pageSize"
  [totalRecords]="totalRecords"
  (onPage)="onPageChange($event)"
>
  <ng-template pTemplate="header">
    <tr>
      <th>Amount</th>
      <th>Date</th>
      <th>Type</th>
      <th>From</th>
      <th>To</th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-tx>
    <tr>
      <td
        [ngClass]="{
          deposit: tx.type === 'deposit',
          withdraw: tx.type === 'withdraw',
          transfer: tx.type === 'transfer'
        }"
      >
        {{ tx.type === "deposit" ? "+" : "-" }}
        {{ tx.amount | number : "1.0-2" }}
      </td>
      <td>{{ tx.createdAt | date : "dd/MM/yyyy" }}</td>
      <td>{{ tx.type | titlecase }}</td>
      <td>{{ tx.from }}</td>
      <td>{{ tx.to }}</td>
    </tr>
  </ng-template>

  <ng-template pTemplate="emptymessage">
    <tr>
      <td colspan="5">No transactions found.</td>
    </tr>
  </ng-template>
</p-table>
