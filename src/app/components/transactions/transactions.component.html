<p-toolbar>
  <div class="p-toolbar-group-left">
    <p-dropdown
      [options]="filterOptions"
      [(ngModel)]="selectedType"
      placeholder="Filter by Type"
      (onChange)="loadTransactions()"
    ></p-dropdown>

    <p-calendar
      [(ngModel)]="dateFrom"
      selectionMode="single"
      placeholder="From"
      (onSelect)="loadTransactions()"
    ></p-calendar>

    <p-calendar
      [(ngModel)]="dateTo"
      selectionMode="single"
      placeholder="To"
      (onSelect)="loadTransactions()"
    ></p-calendar>
  </div>

  <div class="p-toolbar-group-right">
    <input
      pInputText
      type="text"
      placeholder="Search..."
      [(ngModel)]="searchTerm"
      (input)="loadTransactions()"
    />
    <button
      pButton
      type="button"
      icon="pi pi-search"
      (click)="loadTransactions()"
    ></button>
  </div>
</p-toolbar>

<p-table
  [value]="transactions"
  [paginator]="true"
  [rows]="pageSize"
  [totalRecords]="totalRecords"
  (onPage)="onPageChange($event)"
>
  <ng-template pTemplate="header">
    <tr>
      <th>Amount</th>
      <th>Date</th>
      <th>Type</th>
      <th>From</th>
      <th>To</th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-tx>
    <tr>
      <td
        [ngClass]="{
          deposit: tx.type === 'deposit',
          withdraw: tx.type === 'withdraw',
          transfer: tx.type === 'transfer'
        }"
      >
        {{ tx.type === "deposit" ? "+" : "-" }}{{ tx.amount }}
      </td>
      <td>{{ tx.createdAt | date : "dd/MM/yyyy" }}</td>
      <td>{{ tx.type | titlecase }}</td>
      <td>{{ tx.from }}</td>
      <td>{{ tx.to }}</td>
    </tr>
  </ng-template>

  <ng-template pTemplate="emptymessage">
    <tr>
      <td colspan="5">No transactions found.</td>
    </tr>
  </ng-template>
</p-table>
